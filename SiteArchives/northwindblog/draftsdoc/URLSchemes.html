<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="utf-8" />
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<title>URL Schemes</title>
	</head>
<body>
<h1>URL Schemes</h1>

<p>Drafts 支持基于 <a href="http://x-callback-url.com/">x-callback-url 调用方法</a> 的唤起动作，它们均以 <code>drafts5:</code> 开头。所有的唤起动作链接都遵循如下格式：</p>

<pre><code class="code-highlighted code-js"><span class="syntax-all syntax-string">drafts5</span><span class="syntax-all syntax-constant">:</span><span class="syntax-all syntax-comment">//x-callback-url/[执行操作的名称]?[执行操作的参数]
</span></code></pre>

<p>值得注意的是，在所有 Drafts 5 的 URL Schemes 中，<code>x-callback-url</code> 这一部分都是可选的。换言之，<code>drafts5://[actionName]... </code> 和 <code>drafts5://x-callback-url/[actionName]... </code> 实现的功能是一样的。</p>

<p>所有调用的 URL 都应该是合法的 URL，其中的内容应该是 URL encode 过的。极少数动作在有些情况下还支持 <code>x-callback-url </code>、<code>x-success</code>、<code>x-error </code> 和 <code>x-cancel </code> 这些参数。</p>

<h2>支持的操作</h2>

<p>在以下的内容中，我会在操作的名称边附加如下两个标记中的一个或多个：</p>

<ul>
	<li>「 <i class="fa fa-mobile"></i>」代表 iOS 版本的 Drafts 支持这个操作。若无此标记出现，则表明 iOS 版本的 Drafts 不支持此动作。</li>
	<li>「 <i class="fa fa-desktop"></i>」代表 macOS 版本的 Drafts 支持这个操作。若无此标记出现，则表明 macOS 版本的 Drafts 不支持此动作。</li>
</ul>

<h3><code>\create</code> <i class="fa fa-mobile"></i> <i class="fa fa-desktop"></i></h3>

<p>新建一条草稿，其内容为传递给 <code>text</code> 参数的值。如果为 <code>x-success</code> 提供地址，</p>

<ul>
	<li>参数：

		<ul>
			<li><code>text</code><em>[字符串，必选]</em>：新建草稿的内容。</li>
			<li><code>tag</code><em>[字符串，可选]</em>：为新建草稿指定标签。可以使用多个参数，来添加多个标签。</li>
			<li><code>action</code><em>[字符串，可选]</em>： <i class="fa fa-mobile"></i> 动作的名字。如果提供这个参数，会对新建的草稿运行这个动作。</li>
			<li><code>allowEmpty</code><em>[布尔值，可选]</em>：如果提供了运行动作的参数，你可以通过添加 <code>allowEmpty=false</code> 以便在 <code>text</code> 参数为空的时候停止运行动作。这可以防止带有 <code>x-callback-url</code> 的动作循环运行。</li>
			<li><code>retParam</code><em>[字符串，可选]</em>：用于将创建的草稿之 <code>UUID</code> 传递回 <code>x-success-url</code> 的变量的名称。默认情况下，Drafts 会使用 <code>uuid</code> 作为这个变量的名称。但在使用某些应用时可能会对这个变量的名称有所要求（例如「快捷指令」需要这个变量命名为 <code>input</code>），你可以使用这个参数来覆盖默认的变量名。</li>
		</ul></li>
	<li>示例 ：

		<ul>
			<li><code>drafts5://x-callback-url/create?text=Hello%20World</code>

				<ul>
					<li>创建一条新草稿，其内容为「Hello World」。</li>
				</ul></li>
		</ul></li>
</ul>

<h3><code>\open</code> <i class="fa fa-mobile"></i> <i class="fa fa-desktop"></i></h3>

<p>基于提供的 <code>UUID</code> 参数，打开一条已经存在的草稿。</p>

<ul>
	<li>参数

		<ul>
			<li><code>uuid</code><em>[字符串，必选]</em>：需要打开的草稿的 <code>UUID</code> 标识符。</li>
		</ul></li>
</ul>

<head> 
    <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/all.js"></script> 
<script defer src="https://use.fontawesome.com/releases/v5.0.13/js/v4-shims.js"></script> 
</head> 
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
</body>
</html>

